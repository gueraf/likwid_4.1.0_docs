<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>LIKWID: Performance monitoring module</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LIKWID
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Performance monitoring module </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Data type definition for Lua performance monitoring module in the Lua API</h1>
<p><a class="anchor" id="lua_counterinfo"></a></p><h2>Event and Counter Info</h2>
<p>This structure is returned by <a class="el" href="lua_Perfmon.html#getEventsAndCounters">getEventsAndCounters</a> function</p>
<table class="doxtable">
<tr>
<th>Membername </th><th>Comment  </th></tr>
<tr>
<td><em>Counters</em>  </td><td><table class="doxtable">
<tr>
<th>Membername </th><th>Comment  </th></tr>
<tr>
<td>Name </td><td>Counter name as used by LIKWID  </td></tr>
<tr>
<td>Index </td><td>Index of counter definition in internal list of counters  </td></tr>
<tr>
<td>Type </td><td>ID number of counter type, use TypeName to get a human-readable name  </td></tr>
<tr>
<td>TypeName </td><td>Name of counter type  </td></tr>
<tr>
<td>Options </td><td>String with the options available for the counter  </td></tr>
</table>
</td></tr>
<tr>
<td><em>Events</em>  </td><td><table class="doxtable">
<tr>
<th>Membername </th><th>Comment  </th></tr>
<tr>
<td>Name </td><td>Event name as used by LIKWID  </td></tr>
<tr>
<td>ID </td><td>Event ID as defined by CPU vendor  </td></tr>
<tr>
<td>Umask </td><td>Umask further restricting the event defined by ID  </td></tr>
<tr>
<td>Limit </td><td>String containing the name(s) of registers the event can be programmed on  </td></tr>
<tr>
<td>Options </td><td>String with the options available for the event  </td></tr>
</table>
</td></tr>
</table>
<p><a class="anchor" id="lua_groupdata"></a></p><h2>Info about a performance group</h2>
<p>This structure is returned by <a class="el" href="lua_Perfmon.html#get_groupdata">get_groupdata</a> function</p>
<table class="doxtable">
<tr>
<th>Membername </th><th>Comment  </th></tr>
<tr>
<td>EventString </td><td>Event set used for the performance group. Well formatted for <a class="el" href="lua_Perfmon.html#addEventSet">addEventSet</a> function  </td></tr>
<tr>
<td>GroupString </td><td>Name of the performance group  </td></tr>
<tr>
<td>LongDescription </td><td>Description of the group. The 'LONG' section in the performance group file  </td></tr>
<tr>
<td><em>Events</em>  </td><td><table class="doxtable">
<tr>
<th>Membername </th><th>Comment  </th></tr>
<tr>
<td>Event ID </td><td><table class="doxtable">
<tr>
<td><em>Event</em>  </td><td>Name of event  </td></tr>
<tr>
<td><em>Counter</em>  </td><td>LIKWID's name of the counter register  </td></tr>
</table>
</td></tr>
</table>
</td></tr>
<tr>
<td><em>Metrics</em>  </td><td><table class="doxtable">
<tr>
<th>Membername </th><th>Comment  </th></tr>
<tr>
<td>Metric ID </td><td><table class="doxtable">
<tr>
<td><em>description</em>  </td><td>Descriptive information of the metric  </td></tr>
<tr>
<td><em>formula</em>  </td><td>Formula for calculating the metrics value  </td></tr>
</table>
</td></tr>
</table>
</td></tr>
</table>
<p><a class="anchor" id="lua_pcidevinfo"></a></p><h2>Info about online PCI devices used for performance monitoring</h2>
<p>This structure is returned by <a class="el" href="lua_Perfmon.html#getOnlineDevices">getOnlineDevices</a> function</p>
<table class="doxtable">
<tr>
<th>Membername </th><th>Comment  </th></tr>
<tr>
<td><em>Name</em> (used by LIKWID) </td><td><table class="doxtable">
<tr>
<th>Membername </th><th>Comment  </th></tr>
<tr>
<td>Name </td><td>Name of PCI device  </td></tr>
<tr>
<td>Path </td><td>Path to PCI device  </td></tr>
<tr>
<td>Type </td><td>Human-readable name of the PCI device type  </td></tr>
<tr>
<td>TypeDescription </td><td>Description about the PCI device  </td></tr>
</table>
</td></tr>
</table>
<h1>Function definitions for Lua performance monitoring module in the Lua API</h1>
<p><a class="anchor" id="init"></a></p><h2>init(nrThreads, thread2Cpus)</h2>
<p>Initializes the Perfmon module of LIKWID, like opening the MSR files and check the PCI devices<br />
If in access daemon mode, a single daemon instance is started to forward measurements on all given CPUs</p>
<table class="doxtable">
<tr>
<th>Direction </th><th>Data type(s)  </th></tr>
<tr>
<td>Input Parameter </td><td><table class="doxtable">
<tr>
<td><em>nrThreads</em>  </td><td>Number of CPUs that should be measured  </td></tr>
<tr>
<td><em>thread2Cpus</em>  </td><td>List with length <em>nrThreads</em> containing the relation between thread number and measured CPU  </td></tr>
</table>
</td></tr>
<tr>
<td>Returns </td><td>Error code, 0 for success  </td></tr>
</table>
<p><a class="anchor" id="addEventSet"></a></p><h2>addEventSet(eventSet)</h2>
<p>Creates the internal management structures for the given event set. Checks the registers and if needed PCI device access<br />
The <a class="el" href="lua_Perfmon.html#init">init</a> function as to be called previously</p>
<table class="doxtable">
<tr>
<th>Direction </th><th>Data type(s)  </th></tr>
<tr>
<td>Input Parameter </td><td><table class="doxtable">
<tr>
<td><em>eventSet</em>  </td><td>String composed of all events in the event set. Format is Event1:Counter1(:Option11:Options12:...),Event2:Counter2...  </td></tr>
</table>
</td></tr>
<tr>
<td>Returns </td><td>The group ID of the added event set  </td></tr>
</table>
<p><a class="anchor" id="setupCounters"></a></p><h2>setupCounters(groupID)</h2>
<p>Setup the config registers to measure the events defined by group</p>
<table class="doxtable">
<tr>
<th>Direction </th><th>Data type(s)  </th></tr>
<tr>
<td>Input Parameter </td><td><table class="doxtable">
<tr>
<td><em>groupID</em>  </td><td>ID of group returned by <a class="el" href="lua_Perfmon.html#addEventSet">addEventSet</a> function.  </td></tr>
</table>
</td></tr>
<tr>
<td>Returns </td><td>Error code, 0 for success  </td></tr>
</table>
<p><a class="anchor" id="startCounters"></a></p><h2>startCounters()</h2>
<p>Starts the perfmon group previously set up with <a class="el" href="lua_Perfmon.html#setupCounters">setupCounters</a> function.</p>
<table class="doxtable">
<tr>
<th>Direction </th><th>Data type(s)  </th></tr>
<tr>
<td>Input Parameter </td><td>None  </td></tr>
<tr>
<td>Returns </td><td>Error code, 0 for success  </td></tr>
</table>
<p><a class="anchor" id="stopCounters"></a></p><h2>stopCounters()</h2>
<p>Stops the perfmon group and reads the counters into the internal result section. Use the <a class="el" href="lua_Perfmon.html#getResult">getResult</a> or <a class="el" href="lua_Perfmon.html#getResults">getResults</a> functions to get the results.</p>
<table class="doxtable">
<tr>
<th>Direction </th><th>Data type(s)  </th></tr>
<tr>
<td>Input Parameter </td><td>None  </td></tr>
<tr>
<td>Returns </td><td>Error code, 0 for success  </td></tr>
</table>
<p><a class="anchor" id="readCounters"></a></p><h2>readCounters()</h2>
<p>Reads the perfmon group into the internal result section. Use the <a class="el" href="lua_Perfmon.html#getResult">getResult</a> or <a class="el" href="lua_Perfmon.html#getResults">getResults</a> functions to get the results.<br />
The counters will be stopped shortly and started after reading to exclude the LIKWID code from measurements.</p>
<table class="doxtable">
<tr>
<th>Direction </th><th>Data type(s)  </th></tr>
<tr>
<td>Input Parameter </td><td>None  </td></tr>
<tr>
<td>Returns </td><td>Error code, 0 for success  </td></tr>
</table>
<p><a class="anchor" id="switchGroup"></a></p><h2>switchGroup(newgroup)</h2>
<p>Switches the currently active group in the perfmon module. If the given group ID does not exist, it fallbacks to group ID 1.</p>
<table class="doxtable">
<tr>
<th>Direction </th><th>Data type(s)  </th></tr>
<tr>
<td>Input Parameter </td><td><table class="doxtable">
<tr>
<td><em>newgroup</em>  </td><td>Switch active group to <em>newgroup</em>   </td></tr>
</table>
</td></tr>
<tr>
<td>Returns </td><td>Error code, 0 for success  </td></tr>
</table>
<p><a class="anchor" id="finalize"></a></p><h2>finalize()</h2>
<p>Destroy internal structures and clean all used registers</p>
<table class="doxtable">
<tr>
<th>Direction </th><th>Data type(s)  </th></tr>
<tr>
<td>Input Parameter </td><td>None  </td></tr>
<tr>
<td>Returns </td><td>Always 0  </td></tr>
</table>
<p><a class="anchor" id="getResult"></a></p><h2>getResult(groupID, eventID, threadID)</h2>
<p>Get result for a group, event, thread combination. All options must be given</p>
<table class="doxtable">
<tr>
<th>Direction </th><th>Data type(s)  </th></tr>
<tr>
<td>Input Parameter </td><td><table class="doxtable">
<tr>
<td><em>groupID</em>  </td><td>Return result from group defined by <em>groupID</em>   </td></tr>
<tr>
<td><em>eventID</em>  </td><td>Return result for event with <em>eventID</em>. Position in string given to <a class="el" href="lua_Perfmon.html#addEventSet">addEventSet</a> function  </td></tr>
<tr>
<td><em>threadID</em>  </td><td>Return result for thread with <em>threadID</em> as defined by the <em>thread2Cpus</em> input parameter for <a class="el" href="lua_Perfmon.html#init">init</a> function  </td></tr>
</table>
</td></tr>
<tr>
<td>Returns </td><td>Result  </td></tr>
</table>
<p><a class="anchor" id="getResults"></a></p><h2>getResults()</h2>
<p>Get all results for all group, event, thread combinations</p>
<table class="doxtable">
<tr>
<th>Direction </th><th>Data type(s)  </th></tr>
<tr>
<td>Input Parameter </td><td>None  </td></tr>
<tr>
<td>Returns </td><td>Three-dimensional list with results. First dim. is groups, second dim. is events and third dim. are the threads  </td></tr>
</table>
<p><a class="anchor" id="getMarkerResults"></a></p><h2>getMarkerResults(filename, group_list, num_cpus)</h2>
<p>Get the results for an output file written by <a class="el" href="group__MarkerAPI.html">Marker API module</a></p>
<table class="doxtable">
<tr>
<th>Direction </th><th>Data type(s)  </th></tr>
<tr>
<td>Input Parameter </td><td><table class="doxtable">
<tr>
<td><em>filename</em>  </td><td>Filename written by <a class="el" href="group__MarkerAPI.html">Marker API module</a>  </td></tr>
<tr>
<td><em>group_list</em>  </td><td>List of defined groups  </td></tr>
<tr>
<td><em>num_cpus</em>  </td><td>Amount of defined CPUs. Is used just used for checking if the <a class="el" href="group__MarkerAPI.html">Marker API module</a> run is valid. If LIKWID_MARKER_THREADINIT is not called properly the tests will fail  </td></tr>
</table>
</td></tr>
<tr>
<td>Returns </td><td>Four-dimensional list with results. First dim. is groups, second dim. is management regions, and third dim. are the events and fourth dim. are the threads  </td></tr>
</table>
<p><a class="anchor" id="getEventsAndCounters"></a></p><h2>getEventsAndCounters()</h2>
<p>Get a list containing all event and counter definitions</p>
<table class="doxtable">
<tr>
<th>Direction </th><th>Data type(s)  </th></tr>
<tr>
<td>Input Parameter </td><td>None  </td></tr>
<tr>
<td>Returns </td><td>Event and counter info like <a class="el" href="lua_Perfmon.html#lua_counterinfo">lua_counterinfo</a>  </td></tr>
</table>
<p><a class="anchor" id="getOnlineDevices"></a></p><h2>getOnlineDevices()</h2>
<p>Get a list containing all online PCI devices</p>
<table class="doxtable">
<tr>
<th>Direction </th><th>Data type(s)  </th></tr>
<tr>
<td>Input Parameter </td><td>None  </td></tr>
<tr>
<td>Returns </td><td>PCI device info like <a class="el" href="lua_Perfmon.html#lua_pcidevinfo">lua_pcidevinfo</a>  </td></tr>
</table>
<p><a class="anchor" id="getNumberOfGroups"></a></p><h2>getNumberOfGroups()</h2>
<p>Returns the number of event sets (groups) added to the perfmon module</p>
<table class="doxtable">
<tr>
<th>Direction </th><th>Data type(s)  </th></tr>
<tr>
<td>Input Parameter </td><td>None  </td></tr>
<tr>
<td>Returns </td><td>Amount of configured groups  </td></tr>
</table>
<p><a class="anchor" id="getIdOfActiveGroup"></a></p><h2>getIdOfActiveGroup()</h2>
<p>Returns the ID of the currently active group</p>
<table class="doxtable">
<tr>
<th>Direction </th><th>Data type(s)  </th></tr>
<tr>
<td>Input Parameter </td><td>None  </td></tr>
<tr>
<td>Returns </td><td>ID of active group  </td></tr>
</table>
<p><a class="anchor" id="getRuntimeOfGroup"></a></p><h2>getRuntimeOfGroup(groupID)</h2>
<p>Returns the measurement time of the given groupID</p>
<table class="doxtable">
<tr>
<th>Direction </th><th>Data type(s)  </th></tr>
<tr>
<td>Input Parameter </td><td><table class="doxtable">
<tr>
<td><em>groupID</em>  </td><td>Return the measurement time for group defined by <em>groupID</em>   </td></tr>
</table>
</td></tr>
<tr>
<td>Returns </td><td>Measurement time of group  </td></tr>
</table>
<p><a class="anchor" id="getNumberOfEvents"></a></p><h2>getNumberOfEvents(groupID)</h2>
<p>Returns the amount of events for the given groupID</p>
<table class="doxtable">
<tr>
<th>Direction </th><th>Data type(s)  </th></tr>
<tr>
<td>Input Parameter </td><td><table class="doxtable">
<tr>
<td><em>groupID</em>  </td><td>Return the measurement time for group defined by <em>groupID</em>   </td></tr>
</table>
</td></tr>
<tr>
<td>Returns </td><td>Amount of events in group  </td></tr>
</table>
<p><a class="anchor" id="getNumberOfThreads"></a></p><h2>getNumberOfThreads()</h2>
<p>Returns the number of threads as given to <a class="el" href="lua_Perfmon.html#init">init</a> function</p>
<table class="doxtable">
<tr>
<th>Direction </th><th>Data type(s)  </th></tr>
<tr>
<td>Input Parameter </td><td>None  </td></tr>
<tr>
<td>Returns </td><td>Amount of measurement threads  </td></tr>
</table>
<p><a class="anchor" id="get_groups"></a></p><h2>get_groups()</h2>
<p>Returns a list of all performance groups in <em>groupfolder</em> </p>
<table class="doxtable">
<tr>
<th>Direction </th><th>Data type(s)  </th></tr>
<tr>
<td>Input Parameter </td><td>None  </td></tr>
<tr>
<td>Returns </td><td><table class="doxtable">
<tr>
<td><em>numerOfGroups</em>  </td><td>Amount of groups in <em>groupfolder</em> for given <em>architecture</em>   </td></tr>
<tr>
<td><em>groups</em>  </td><td>List with the names of all performance groups in <em>groupfolder</em> for given <em>architecture</em>   </td></tr>
</table>
</td></tr>
</table>
<p><a class="anchor" id="get_groupdata"></a></p><h2>get_groupdata(group)</h2>
<p>Read in the performance group <em>group</em> </p>
<table class="doxtable">
<tr>
<th>Direction </th><th>Data type(s)  </th></tr>
<tr>
<td>Input Parameter </td><td><table class="doxtable">
<tr>
<td><em>group</em>  </td><td>Get group data for <em>group</em>   </td></tr>
</table>
</td></tr>
<tr>
<td>Returns </td><td><table class="doxtable">
<tr>
<td><em>groupdata</em>  </td><td>Structure with all group information found for the performance group <em>group</em>, see <a class="el" href="lua_Perfmon.html#lua_groupdata">lua_groupdata</a>  </td></tr>
</table>
</td></tr>
</table>
<p>*/</p>
<p>/*! </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat May 21 2016 18:02:59 for LIKWID by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
